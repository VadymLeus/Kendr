// frontend/src/features/editor/blocks/SocialIconsBlock.jsx
import React from 'react';

const IconWrapper = ({ children, href, isEditorPreview }) => (
    <a
        href={href}
        target="_blank"
        rel="noopener noreferrer"
        onClick={isEditorPreview ? (e) => e.preventDefault() : undefined}
        title={isEditorPreview ? "–ü–æ—Å–∏–ª–∞–Ω–Ω—è –≤–∏–º–∫–Ω–µ–Ω–µ –≤ —Ä–µ–∂–∏–º—ñ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è" : ""}
        style={{
            display: 'inline-block',
            margin: '0 8px',
            color: 'var(--site-text-primary)',
            textDecoration: 'none',
            opacity: isEditorPreview ? 0.7 : 1,
            transition: 'color 0.2s ease, transform 0.2s ease'
        }}
        onMouseEnter={(e) => {
            e.currentTarget.style.color = 'var(--site-accent)';
            e.currentTarget.style.transform = 'scale(1.1)';
        }}
        onMouseLeave={(e) => {
            e.currentTarget.style.color = 'var(--site-text-primary)';
            e.currentTarget.style.transform = 'scale(1)';
        }}
    >
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="currentColor" stroke="none" style={{ display: 'block' }}>
            {children}
        </svg>
    </a>
);

const FacebookIcon = () => <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>;
const InstagramIcon = () => <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.07 1.646.07 4.85s-.012 3.584-.07 4.85c-.148 3.227-1.669 4.771-4.919 4.919-1.266.058-1.646.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.07-1.646-.07-4.85s.012-3.584.07-4.85c.148-3.227 1.669 4.771 4.919-4.919 1.266-.058 1.646-.07 4.85-.07zM12 0C8.74 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.74 0 12s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.74 24 12 24s3.667-.014 4.947-.072c4.358-.2 6.78-2.618 6.98-6.98C23.986 15.667 24 15.26 24 12s-.014-3.667-.072-4.947c-.2-4.358-2.618-6.78-6.98-6.98C15.667.014 15.26 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm6.406-11.845a1.44 1.44 0 1 0 0 2.88 1.44 1.44 0 0 0 0-2.88z"></path>;
const TelegramIcon = () => <path d="m9.417 15.181-.397 5.584c.568 0 .814-.244 1.109-.537l2.663-2.545 5.518 4.041c1.012.564 1.725.267 1.998-.931L23.93 3.821l.001-.004c.308-1.423-.471-1.998-1.288-1.631L1.67 8.128c-1.39.564-1.38 1.339-.244 1.631l5.736 1.788 13.255-8.356c.619-.397 1.193-.182.723.211L9.417 15.181z"></path>;
const YouTubeIcon = () => <path d="M21.582 6.186A2.69 2.69 0 0 0 19.7 4.298C18.006 4 12 4 12 4s-6.006 0-7.702.298A2.69 2.69 0 0 0 2.418 6.186 28.37 28.37 0 0 0 2 12s0 5.814.418 7.814a2.69 2.69 0 0 0 1.884 1.888C5.994 20 12 20 12 20s6.006 0 7.702-.298a2.69 2.69 0 0 0 1.884-1.888C22 17.814 22 12 22 12s0-5.814-.418-7.814zM9.75 15.3V8.7l6.5 3.3-6.5 3.3z"></path>;
const TikTokIcon = () => <path d="M12.525 0.02c1.31-.02 2.61-.01 3.91.02.3.01.6.02.89.02.23.01.47.01.7.02.5.01 1 .03 1.5.05.24.01.48.02.72.04.24.01.48.03.72.05.49.03.98.07 1.46.13.48.05.96.12 1.44.21.48.09.95.2 1.41.33.46.13.91.28 1.35.45.43.17.86.37 1.27.59.4.22.8.48 1.18.76.38.28.74.6 1.08.96.34.36.65.75.94 1.17.29.42.55.87.78 1.34.23.47.43.96.59 1.47.16.51.29 1.04.38 1.58.1.54.17 1.09.21 1.64.04.55.05 1.1.05 1.65 0 .56-.01 1.11-.04 1.67-.03.56-.09 1.11-.18 1.66-.09.55-.22 1.09-.39 1.62-.17.53-.38 1.05-.63 1.55-.25.5-.54.98-.87 1.43-.33.45-.7.88-1.1 1.28-.4.4-.84.78-1.3 1.13-.47.35-.96.67-1.47.97-.51.3-1.04.57-1.58.8-.54.23-1.09.43-1.64.6-.55.17-1.1.3-1.65.41-.56.11-1.11.2-1.67.26-.56.06-1.11.1-1.66.13-.55.03-1.1.04-1.65.04h-.45c-.55 0-1.1-.01-1.65-.04-.55-.03-1.1-.07-1.65-.13-.55-.06-1.1-.13-1.64-.21-.54-.08-1.08-.19-1.61-.32-.53-.13-1.05-.29-1.56-.48-.51-.19-1.01-.41-1.5-.66-.49-.25-.96-.54-1.42-.85-.45-.31-.89-.66-1.3-.1.04-.41-.39-.78-.73-1.16-.34-.38-.66-.79-.95-1.23-.29-.44-.55-.9-.79-1.38-.24-.48-.45-.98-.63-1.49-.18-.51-.33-1.04-.45-1.57-.12-.53-.21-1.07-.27-1.61-.06-.54-.1-1.08-.11-1.62 0-.55.01-1.1.04-1.65.03-.56.09-1.11.18-1.66.09-.55.22-1.09.39-1.62.17-.53.38-1.05.63-1.55.25-.5.54-.98.87-1.43.33-.45.7-.88 1.1-1.28.4-.4.84-.78 1.3-1.13.47-.35.96-.67 1.47-.97.51-.3 1.04-.57 1.58-.8.54-.23 1.09-.43 1.64-.6.55-.17 1.1-.3 1.65-.41.56-.11 1.11-.2 1.67-.26.56-.06 1.11-.1 1.66-.13.55-.03 1.1-.04 1.65-.04h.45c.15 0 .3 0 .45 0s.3 0 .45 0zM21.6 8.35c-.02-.23-.05-.46-.09-.69-.04-.23-.09-.46-.15-.69-.06-.23-.13-.46-.21-.68-.08-.22-.17-.44-.27-.66-.1-.22-.21-.43-.33-.64-.12-.21-.25-.42-.4-.62-.15-.2-.3-.4-.47-.59-.17-.19-.35-.38-.54-.55-.19-.17-.39-.34-.6-.5-.21-.16-.42-.31-.64-.45-.22-.14-.45-.28-.68-.4-.23-.12-.46-.23-.7-.34-.24-.11-.48-.21-.72-.3-.24-.09-.49-.17-.74-.24-.25-.07-.5-.13-.76-.19-.26-.06-.52-.11-.78-.15-.26-.04-.52-.07-.79-.1-.27-.03-.54-.05-.81-.06-.27-.01-.54-.01-.81-.01h-.45c-.27 0-.54 0-.81.01-.27.01-.54.03-.81.06-.27.03-.53.06-.79.1-.26.04-.52.09-.78.15-.26.06-.51.13-.76.19-.25.07-.5.15-.74.24-.24.09-.48.19-.72.3-.24.11-.47.22-.7.34-.23.12-.46.26-.68.4-.22.14-.43.29-.64.45-.21.16-.41.33-.6.5-.19.17-.37.36-.54.55-.17.19-.32.39-.47.59-.15.2-.28.41-.4.62-.12.21-.23.43-.33.64-.1.22-.19.44-.27.66-.08.22-.15.45-.21.68-.06.23-.11.46-.15.69-.04.23-.07.46-.09.69-.02.23-.03.46-.04.69-.01.23-.01.46-.01.69 0 .23.01.46.01.69.01.23.02.46.04.69.02.23.05.46.09.69.04.23.09.46.15.69.06.23.13.46.21.68.08.22.17.44.27.66.1.22.21.43.33.64.12.21.25.42.4.62.15.2.3.4.47.59.17.19.35.38.54.55.19.17.39.34.6.5.21.16.42.31.64.45.22.14.45.28.68.4.23.12.46.23.7.34.24.11.48.21.0.72.3.24.09.49.17.0.74.24.25.07.5.13.76.19.26.06.52.11.78.15.26.04.52.07.79.1.27.03.54.05.81.06.27.01.54.01.81.01h.45c.27 0 .54 0 .81-.01.27-.01.54-.03.81-.06.27-.03.53-.06.79-.1.26-.04.52-.09.78-.15.26-.06.51-.13.76-.19.25-.07.5-.15.74-.24.24-.09.48-.19.72-.3.24-.11.47-.22.7-.34.23-.12.46-.26.68-.4.22-.14.43-.29.64-.45.21-.16.41-.33.6-.5.19-.17.37-.36.54-.55.17-.19.32-.39.47-.59.15-.2.28-.41.4-.62.12-.21.23-.43.33-.64.1-.22.19-.44.27-.66.08-.22.15-.45-.21-.68.06-.23.11-.46.15-.69.04-.23.07-.46.09-.69.02-.23.03-.46.04-.69.01-.23.01-.46.01-.69 0-.23-.01-0.46-.01-0.69zM10.02 14.38v-.1c.01-1.38-.01-2.75-.01-4.13 0-.59 0-1.18.02-1.77 0-.11.01-.22.02-.33.01-.11.03-.22.05-.32.02-.1.04-.2.08-.3.04-.1.08-.2.13-.29.05-.09.1-.18.17-.27.07-.09.14-.18.22-.26.08-.08.17-.16.26-.24.09-.08.18-.15.28-.22.1-.07.2-.14.31-.2.11-.06.22-.12.33-.17.11-.05.23-.1.34-.14.11-.04.23-.08.35-.11.12-.03.24-.06.36-.08.12-.02.25-.04.37-.06.12-.02.24-.03.37-.04.13-.01.25-.02.38-.02.13-.01.26-.01.39-.01h.3c.13 0 .26 0 .39.01.13.01.25.01.38.02.13.01.25.03.37.04.12.01.25.04.37.06.12.02.24.05.36.08.12.03.23.07.35.11.11.04.22.09.34.14.11.05.22.11.33.17.11.06.21.13.31.2.1.07.19.14.28.22.09.07.18.16.26.24.08.08.15.17.0.22.26.07.09.13.18.17.27.04.09.08.19.13.29.04.1.06.2.08.3.02.1.03.21.05.32.01.11.02.22.02.33 0 .59.01 1.18.01 1.77 0 1.38-.02 2.75-.02 4.13 0 .03 0 .07 0 .1v.05c-.13 0-.27 0-.4 0-.13 0-.27 0-.4 0-.27 0-.54-.01-.8-.01-.27-.01-.54-.02-.81-.04-.27-.02-.54-.05-.81-.08-.27-.03-.53-.07-.8-.12-.27-.05-.53-.11-.79-.18-.26-.07-.52-.15-.78-.24-.26-.09-.51-.2-.76-.32-.25-.12-.5-.25-.74-.4-.24-.15-.47-.31-.7-.48-.23-.17-.45-.35-.66-.55-.21-.2-.41-.41-.6-.63-.19-.22-.37-.45-.54-.7-.17-.25-.32-.51-.46-.78-.14-.27-.27-.55-.38-.83-.11-.28-.21-.57-.29-.87-.08-.3-.14-.6-.18-.91-.04-.31-.07-.61-.07-.92v-.15c0-.07 0-.13 0-.2 0-.07 0-.13.01-.2 0-.07.01-.13.01-.2.01-.07.01-.13.02-.2.01-.07.02-.13.04-.2.02-.07.03-.13.05-.2.02-.07.04-.13.07-.19.03-.06.05-.12.08-.18.03-.06.06-.12.1-.18.04-.06.07-.12.11-.17.04-.05.08-.1.13-.15.05-.05.1-.1.15-.14.05-.04.1-.08.16-.12.06-.04.11-.08.17-.11.06-.03.12-.06.18-.09.06-.03.13-.05.19-.07.06-.02.12-.04.19-.06.07-.02.13-.03.2-.04.07-.01.13-.02.2-.03.07-.01.13-.01.2-.01h.2c.07 0 .13 0 .2.01.07.01.13.01.2.03.07.01.13.02.2.04.07.02.13.04.19.06.06.02.13.04.19.07.06.03.12.06.18.09.06.03.11.07.0.7.11.06.04.11.08.16.12.05.04.1.09.15.14.05.05.09.1.13.15.04.05.07.11.11.17.04.06.07.12.1.18.03.06.05.12.08.18.03.07.05.13.07.19.02.07.03.13.05.2.02.07.03.13.04.2.01.07.01.13.02.2.01.07.01.13.01.2.01.07.01.13.01.2 0 .07 0 .13 0 .2v.1c0 .22-.01.44-.04.66-.03.22-.07.44-.12.65-.05.21-.12.42-.19.62-.07.2-.16.4-.26.59-.1.19-.21.37-.33.55-.12.18-.25.35-.4.51-.15.16-.3.31-.47.46-.17.15-.35.29-.53.42-.18.13-.37.25-.56.36-.19.11-.38.21-.58.3-.2.09-.4.17-.61.24-.21.07-.42.13-.63.18-.21.05-.43.09-.64.12-.21.03-.43.05-.64.06-.21.01-.43.01-.64.01h-.2c-.21 0-.43 0-.64-.01-.21-.01-.43-.02-.64-.06-.21-.03-.43-.07-.64-.12-.21-.05-.42-.11-.63-.18-.21-.07-.41-.15-.61-.24-.2-.09-.39-.19-.58-.3-.19-.11-.38-.23-.56-.36-.18-.13-.36-.27-.53-.42-.17-.15-.32-.3-0.47-.46-.15-.16-.28-.33-.4-.51-.12-.18-.23-.36-.33-.55-.1-.19-.19-.39-.26-.59-.07-.2-.14-.41-.19-.62-.05-.21-.09-.43-.12-.65-.03-.22-.04-.44-.04-.66v-.1z"></path>;

const SocialIconsBlock = ({ blockData, isEditorPreview }) => {
    const { alignment, facebook, instagram, telegram, youtube, tiktok } = blockData;

    const socialMap = {
        facebook: { href: facebook, icon: <FacebookIcon /> },
        instagram: { href: instagram, icon: <InstagramIcon /> },
        telegram: { href: telegram, icon: <TelegramIcon /> },
        youtube: { href: youtube, icon: <YouTubeIcon /> },
        tiktok: { href: tiktok, icon: <TikTokIcon /> },
    };

    const hasLinks = Object.values(socialMap).some(net => net.href);
    const textSecondary = isEditorPreview ? 'var(--platform-text-secondary)' : 'var(--site-text-secondary)';
    const borderColor = isEditorPreview ? 'var(--platform-border-color)' : 'var(--site-border-color)';

    if (!hasLinks && isEditorPreview) {
        return (
            <div style={{
                padding: '2rem',
                textAlign: 'center',
                background: 'var(--platform-bg)',
                border: `1px dashed ${borderColor}`,
                borderRadius: '8px',
                color: textSecondary,
                minHeight: '100px',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                flexDirection: 'column'
            }}>
                <span style={{fontSize: '2rem'}}>üì±</span>
                <p style={{margin: '0.5rem 0 0 0', fontWeight: '500'}}>–°–æ—Ü–º–µ—Ä–µ–∂—ñ</p>
                <small>–í–∫–∞–∂—ñ—Ç—å –ø–æ—Å–∏–ª–∞–Ω–Ω—è –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö –±–ª–æ–∫—É.</small>
            </div>
        );
    }

    return (
        <div style={{ 
            padding: '20px 0',
            textAlign: alignment || 'left',
            background: isEditorPreview ? 'var(--platform-card-bg)' : 'transparent'
        }}>
            {Object.values(socialMap).map((net, index) => (
                net.href ? (
                    <IconWrapper key={index} href={net.href} isEditorPreview={isEditorPreview}>
                        {net.icon}
                    </IconWrapper>
                ) : null
            ))}
        </div>
    );
};

export default SocialIconsBlock;